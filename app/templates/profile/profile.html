{% extends 'base.html'%}

{% block styles %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
    integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
{% endblock %}

{% block content %}
<div class="container">
    <div class="row">
        <!-- displaying  Username-->
        <div class="col-md-6">
            {% if user.profile_pic_path %}
            <img src="{{url_for('static',filename=user.profile_pic_path)}}" alt=""
                class="img-fluid z-depth-0 rounded-square hoverable">
            {%else%}
            <p>No profile picture</p>
            {% endif %}

            {% if user == current_user %}
            <form action="{{url_for('main.update_pic',uname=user.username)}}" method="post"
                enctype="multipart/form-data">

                <input type="file" name="photo" class="form-control" required>
                <input type="submit">
            </form>
            {% endif %}
        </div>

        <!--Display profile photo-->
        <div class="col-md-6">
            <h3> {{user.username| capitalize}} </h3>
            <!--Displaying user bio-->
            {% if user.bio %}
            <p> {{user.bio}}</p>
            {%else%}
            <p> {{user.username| capitalize}} has no bio </p>
            {% endif %}
        </div>
    </div>
    {% for pitch in pitches [::-1] %}
    <div class="card  w-90 mb-3" style="width: 65rem; float: left;">
        <div class="card-body">
            <h5 class="card-title">{{ pitch.title }}</h5>
            <p class="card-title">{{ pitch.pitch }}</p>
            <p class="card-text">{{ pitch.category }}</p>
            <h6 class="card-subtitle mb-2 text-muted">{{ pitch.date }}</h6>
            <a href="{{ url_for('main.new_comment',pitches_id = pitch.id) }}"><button type="button" class="btn btn-outline-dark">Comments</button></a>
            <div class="game-object">
                <script type="text/javascript">
                    var clicks = 0;

                    function updateClickCount() {
                        document.getElementById("clickCount").innerHTML = clicks;
                    }
                </script>
                <a onClick="clicks++;updateClickCount();" id="push">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                        class="bi bi-chevron-up" viewBox="0 0 16 16">
                        <path fill-rule="evenodd"
                            d="M7.646 4.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1-.708.708L8 5.707l-5.646 5.647a.5.5 0 0 1-.708-.708l6-6z" />
                    </svg>
                </a>
                <div id="clickCount"></div>
            </div>
            <div class="game-object">
                <script type="text/javascript">
                    var clicks = 0;

                    function updateClickCount() {
                        document.getElementById("clickCount").innerHTML = clicks;
                    }
                </script>
                <a onClick="clicks--;updateClickCount();" id="push">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                        class="bi bi-chevron-down" viewBox="0 0 16 16">
                        <path fill-rule="evenodd"
                            d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z" />
                    </svg>
                </a>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}